import { CodeSurfer } from "code-surfer";

import { myTheme } from "./theme";

import { Audio } from "./Audio";

export const theme = myTheme;

<Head>
  <title>Making Minimal Techno with WebAssembly And a C Compiler</title>
</Head>

# Hello

---

<Audio versions={{ 9: "step1Sine" }} />

<CodeSurfer >

```c 2:4

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 6:7

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 8

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 9

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 6:11

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 13,17:18

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 19

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 20

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c 21

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

```c

// Determine duration of one sample
#define SAMPLERATE 48000.0f
#define SAMPLE_DUR 1.0f / SAMPLERATE

// Define phasor between 0 and 1 at a given frequency
float phasor(float phase, float freq) {
  phase += SAMPLE_DUR * freq; // Increment at every sample
  phase -= trunc(phase);      // Keep between 0-1
  return phase;
}

float kickPhase = 0.0f; // Accumulated phase

float* makeSomeTechno() {
  for (int i = 0; i < 128; i++) {
    float kickPitch = 200.0f; // Hz
    kickPhase = phasor(kickPhase, kickPitch);
    float kick = sin(kickPhase * TWO_PI); // Sine wave
    kick *= 0.15f; // Make it less loud
    outputBuffer[i] = kick; // Output
  }
  return outputBuffer;
}

```

</CodeSurfer>

---

## The End
